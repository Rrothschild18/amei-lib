<div [ngSwitch]="field.type">
  <ng-container *ngSwitchCase="'text'">
    <mat-form-field
      class="w-100"
      appearance="outline"
      [hideRequiredMarker]="!!fieldAttributes?.hideRequiredMarker"
    >
      <mat-label>{{ field.placeholder || field.label }}</mat-label>
      <input
        matInput
        [placeholder]="field.placeholder || ''"
        [formControlName]="field.name"
        [autofocus]="!!fieldAttributes?.autofocus"
        [minlength]="fieldAttributes?.minlength ?? 0"
        [maxlength]="fieldAttributes?.maxlength ?? 999"
        [readonly]="!!fieldAttributes?.readonly"
        [pattern]="fieldAttributes?.pattern ?? ''"
      />
      <mat-spinner
        class="loading"
        [diameter]="30"
        matSuffix
        *ngIf="!!fieldAttributes?.isLoading"
      ></mat-spinner>
      <mat-error *ngIf="fieldRef?.errors" class="me-2">{{
        showError(fieldRef?.errors)
      }}</mat-error>
    </mat-form-field>
  </ng-container>

  <ng-container *ngSwitchCase="'email'">
    <mat-form-field
      class="w-100"
      appearance="outline"
      [hideRequiredMarker]="!!fieldAttributes?.hideRequiredMarker"
    >
      <mat-label>{{ field.placeholder || field.label }}</mat-label>
      <input
        matInput
        type="email"
        [formControlName]="field.name"
        [autofocus]="!!fieldAttributes?.autofocus"
        [maxlength]="fieldAttributes?.maxlength ?? 999"
        [minlength]="fieldAttributes?.minlength ?? 0"
        [placeholder]="field.placeholder || ''"
        [pattern]="fieldAttributes?.pattern ?? ''"
        [readonly]="!!fieldAttributes?.readonly"
      />
      <mat-error *ngIf="fieldRef?.errors" class="me-2">{{
        showError(fieldRef?.errors)
      }}</mat-error>
    </mat-form-field>
  </ng-container>

  <ng-container *ngSwitchCase="'select'">
    <mat-form-field
      class="w-100"
      appearance="outline"
      [hideRequiredMarker]="!!fieldAttributes?.hideRequiredMarker"
    >
      <mat-label>{{ field.label }}</mat-label>
      <mat-select
        [formControlName]="field.name"
        [placeholder]="field.placeholder || ''"
        [multiple]="!!fieldAttributes?.multiple"
        [value]="fieldAttributes?.value || undefined"
      >
        <mat-option
          *ngFor="let option of field.options"
          [value]="option.value"
          >{{ option.label }}</mat-option
        >
      </mat-select>
      <mat-spinner
        class="loading"
        [diameter]="30"
        matSuffix
        *ngIf="!!fieldAttributes?.isLoading"
      ></mat-spinner>
      <mat-error *ngIf="fieldRef?.errors" class="me-2">{{
        showError(fieldRef?.errors)
      }}</mat-error>
    </mat-form-field>
  </ng-container>

  <ng-container *ngSwitchCase="'textarea'">
    <mat-form-field
      class="w-100"
      appearance="outline"
      [hideRequiredMarker]="!!fieldAttributes?.hideRequiredMarker"
    >
      <mat-label>{{ field.name }}</mat-label>
      <textarea
        matInput
        [formControlName]="field.name"
        [autofocus]="!!fieldAttributes?.autofocus"
        [maxlength]="fieldAttributes?.maxlength ?? 999"
        [minlength]="fieldAttributes?.minlength ?? 0"
        [placeholder]="field.placeholder || ''"
        [pattern]="fieldAttributes?.pattern ?? ''"
        [readonly]="!!fieldAttributes?.readonly"
      ></textarea>
      <mat-error *ngIf="fieldRef?.errors" class="me-2">{{
        showError(fieldRef?.errors)
      }}</mat-error>
    </mat-form-field>
  </ng-container>

  <ng-container *ngSwitchCase="'radio'">
    <div class="w-100">
      <mat-radio-group
        aria-label="Select an option"
        [formControlName]="field.name"
      >
        <mat-label class="d-block">{{ field.label }}</mat-label>
        <mat-radio-button
          [value]="option.value"
          *ngFor="let option of field.options"
          >{{ option.label }}</mat-radio-button
        >
      </mat-radio-group>
    </div>
  </ng-container>

  <ng-container *ngSwitchCase="'date'">
    <div>
      <mat-form-field
        appearance="outline"
        class="w-100"
        [hideRequiredMarker]="!!fieldAttributes?.hideRequiredMarker"
      >
        <mat-label>{{ field.placeholder || field.label }}</mat-label>
        <input
          matInput
          [formControlName]="field.name"
          [matDatepicker]="picker"
          [autofocus]="!!fieldAttributes?.autofocus"
          [maxlength]="fieldAttributes?.maxlength ?? 999"
          [minlength]="fieldAttributes?.minlength ?? 0"
          [placeholder]="field.placeholder || ''"
          [pattern]="fieldAttributes?.pattern ?? ''"
          [readonly]="!!fieldAttributes?.readonly"
          [pattern]="fieldAttributes?.pattern || ''"
          [min]="fieldAttributes?.min || undefined"
          [max]="fieldAttributes?.max || undefined"
        />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <!-- <mat-error *ngIf="fieldRef?.errors" class="me-2">{{
          showError(fieldRef?.errors)
        }}</mat-error> -->
      </mat-form-field>
    </div>
  </ng-container>

  <ng-container *ngSwitchCase="'checkboxGroup'">
    <div class="w-100" [formGroupName]="field.name">
      <mat-checkbox
        labelPosition="before"
        *ngFor="let option of field.options"
        [formControlName]="option.label"
        [indeterminate]="!!fieldAttributes?.indeterminate"
      >
        {{ option.label }}
      </mat-checkbox>
    </div>
  </ng-container>

  <ng-container *ngSwitchCase="'checkbox'">
    <mat-checkbox
      labelPosition="before"
      [formControlName]="field.name"
      [indeterminate]="!!fieldAttributes?.indeterminate"
    >
      {{ field.label }}
    </mat-checkbox>
  </ng-container>
</div>
