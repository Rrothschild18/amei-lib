<mat-form-field
  [appearance]="appearance"
  [floatLabel]="floatingLabel"
  class="w-100"
>
  <mat-label>{{ placeholder }}</mat-label>
  <input
    matInput
    type="text"
    [formControl]="searchControl"
    [placeholder]="placeholder"
    [matAutocomplete]="autoCompleteRef"
  />
  <mat-spinner [diameter]="30" matSuffix *ngIf="isLoading"></mat-spinner>
</mat-form-field>

<mat-autocomplete #autoCompleteRef="matAutocomplete" class="w-100">
  <mat-option class="d-none"> </mat-option>
  <mat-checkbox
    class="checkbox"
    [checked]="allSelected"
    (click)="onSelectAll()"
    *ngIf="selectAllOption"
  >
    Todos
  </mat-checkbox>

  <div *ngFor="let option of filteredOptionsByUser$ | async; trackBy: trackBy">
    <mat-checkbox
      [checked]="false"
      class="checkbox"
      (click)="onAddOption(option.value)"
    >
      {{ option.label }}
    </mat-checkbox>
  </div>
</mat-autocomplete>
