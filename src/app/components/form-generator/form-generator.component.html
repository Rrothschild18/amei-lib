<form [formGroup]="form">
  <div *ngIf="!!toArrayFields(fields).length">
    <ng-container
      *ngFor="let field of toArrayFields(fields)"
      [ngTemplateOutlet]="getTemplateRefByName(field.name) || default"
      [ngTemplateOutletContext]="{
        field: field,
        formRef: form,
        handleInputs: this.handleInputs,
        fieldRef: form.get(field.name)
      }"
    >
      <ng-template #default>
        <app-field
          [field]="field"
          [form]="form"
          (inputValue)="handleInputs($event)"
        ></app-field>
      </ng-template>
    </ng-container>
  </div>

  <pre> {{ form.value | json }}</pre>
</form>
